
 <span *ngIf="composition!=undefined" class="container-fluid">
    <mat-card>
        <mat-card-title >
            <div>FHIR Document</div>
        </mat-card-title>
        <mat-card-subtitle> <td-message label="Info" sublabel="Generated from the FHIR Document structured content" color="accent" icon="info"></td-message></mat-card-subtitle>
        <mat-card-content>
            <app-composition-detail [composition] = "composition" [encounter]="encounter"></app-composition-detail>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button  color="accent"  placement="top" (click)="openResource(composition)"><mat-icon>code</mat-icon>
            Composition</button>
            <button mat-button  color="accent" placement="top" (click)="openResource(patient)"><mat-icon>code</mat-icon>
            Patient</button>
            <span *ngIf="encounter !== undefined"><button mat-button  placement="top"  color="accent" (click)="openResource(encounter)"><mat-icon>code</mat-icon>
            Encounter</button></span>
        </mat-card-actions>
      </mat-card>


      <mat-card>
            <mat-card-title>
                <div layout="row" layout-align="start center" flex>
                <span>{{composition.title}}</span>
                <span flex></span>
                {{composition.date | date: 'dd MMM yyyy HH:mm' }}
                </div>
            </mat-card-title>
            <mat-card-subtitle> <td-message label="Info" sublabel="Generated from the FHIR Document narrative content" color="accent" icon="info"></td-message></mat-card-subtitle>
          <mat-card-content>
                <span *ngIf="patient!=undefined && patient.text !=undefined">
                  <mat-card>
                      <mat-card-title>Patient</mat-card-title>
                      <mat-card-content>
                           <span class="card-body" [innerHTML]="patient.text.div"></span>
                      </mat-card-content>
                  </mat-card>
                </span>
                <span *ngFor="let section of sections" >
                      <app-view-document-section [section] = "section" ></app-view-document-section>
                </span>
          </mat-card-content>
          <mat-card-actions>
              <button mat-raised-button (click)="downloadPDF()" color="accent">Export PDF</button>
              <button mat-raised-button (click)="downloadHTML()" color="accent">Export html</button>
          </mat-card-actions>
      </mat-card>


</span>


